(this["webpackJsonpweb-player"]=this["webpackJsonpweb-player"]||[]).push([[0],{84:function(e,t,n){"use strict";n.r(t);var r,a,i,s,c,o,l,d,u,b,j,g,p=n(1),h=n.n(p),O=n(27),m=n.n(O),f=n(35),x=n(10),y=n(2),v={isUserSignedIn:!1,loading:!1,errors:{signIn:!1,mediaList:!1,player:!1},entities:[],contentUrl:"",listId:2},I=function(e,t){switch(t.type){case"loading":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"signIn":if(t.payload){var n=t.payload;return sessionStorage.setItem("token",n.AuthorizationToken.Token),sessionStorage.setItem("user",n.User.FullName),Object(y.a)(Object(y.a)({},e),{},{isUserSignedIn:"User"in n,loading:!1,errors:{signIn:!1,mediaList:!1,player:!1}})}return Object(y.a)(Object(y.a)({},e),{},{isUserSignedIn:!0,loading:!1});case"signOut":return sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),Object(y.a)(Object(y.a)({},e),{},{isUserSignedIn:!1,loading:!1,errors:{signIn:!1,mediaList:!1,player:!1}});case"getMediaList":return Object(y.a)(Object(y.a)({},e),{},{loading:!1,entities:t.payload.Entities,contentUrl:"",errors:Object(y.a)(Object(y.a)({},e.errors),{},{mediaList:!1})});case"error":return Object(y.a)(Object(y.a)({},e),{},{errors:Object(y.a)(Object(y.a)({},e.errors),{},Object(x.a)({},t.payload,!0)),loading:!1});case"getMedia":return t.payload?Object(y.a)(Object(y.a)({},e),{},{contentUrl:t.payload.ContentUrl,errors:Object(y.a)(Object(y.a)({},e.errors),{},{player:!1})}):Object(y.a)(Object(y.a)({},e),{},{contentUrl:""});case"changeListId":return Object(y.a)(Object(y.a)({},e),{},{listId:t.payload});default:return e}},w=n(3),S=n(4),k=Object(S.a)(r||(r=Object(w.a)(["\nhtml {\n  box-sizing: border-box\n}\n\n*, *::after, *::before {\n    box-sizing: inherit;\n}\n\nbody {\n    margin: 0;\n    padding: 0;\n}\n"]))),L=n(8),U=n.n(L),M=n(9),C=n(31),T=n.n(C).a.create({baseURL:"https://thebetter.bsgroup.eu",headers:{"Content-Type":"application/json; charset=utf-8"}}),z=n(0),A=function(e){var t=e.color,n=void 0===t?"is-danger":t,r=e.children;return Object(z.jsx)("div",{className:"notification ".concat(n," is-light has-text-centered"),children:r})},F=S.b.div(a||(a=Object(w.a)(["\n  height: 100%;\n  min-height: 100vh;\n  background: #f0f5f5;\n\n  display: grid;\n  grid-template-columns: 150px 1fr 150px;\n  grid-template-rows: 200px 1fr 1fr;\n"]))),N=S.b.div(i||(i=Object(w.a)(["\n  width: 100%;\n\n  grid-row: ",";\n  grid-column: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.row}),(function(e){return e.column})),E=S.b.li(s||(s=Object(w.a)(["\n  cursor: pointer;\n  &:hover {\n    transform: scale(1.5);\n    transition: transform 0.5s;\n  }\n"]))),P=S.b.div(c||(c=Object(w.a)(["\n  width: 200px;\n  min-height: 100px;\n  background-color: hsl(171, 100%, 41%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),R=Object(S.b)(P)(o||(o=Object(w.a)(["\n  background-image: ",";\n  background-size: cover;\n  background-repeat: no-repeat;\n"])),(function(e){var t=e.Url;return"url(".concat(t,")")})),B=S.b.div(l||(l=Object(w.a)(["\n  height: 2rem;\n  text-align: center;\n  margin-bottom: 1rem;\n"]))),V=function(e){var t=e.id,n=e.title,r=e.images,a=e.setState,i=r.reduce((function(e,t){return"FRAME"===e.ImageTypeCode?e:Object.assign(e,t)}),{});return Object(z.jsxs)(E,{onClick:function(){var e=sessionStorage.getItem("token");Object(M.a)(U.a.mark((function n(){var r;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.post("/Media/GetMediaPlayInfo",{MediaId:t,StreamType:"TRIAL"},{headers:{Authorization:"Bearer ".concat(e)}});case 3:r=n.sent,a({type:"getMedia",payload:r.data}),n.next=12;break;case 7:n.prev=7,n.t0=n.catch(0),401===n.t0.response.status&&a({type:"signOut"}),a({type:"error",payload:"player"}),window.scrollTo({top:0,behavior:"smooth"});case 12:case"end":return n.stop()}}),n,null,[[0,7]])})))()},children:[Object(z.jsx)(B,{children:n}),"FRAME"===i.ImageTypeCode?Object(z.jsx)(R,{Url:i.Url},i.Id):Object(z.jsx)(P,{children:"No cover"},i.Id)]},t)},D=Object(S.b)(N)(d||(d=Object(w.a)(["\n  height: 300px;\n  flex-direction: row;\n  justify-content: flex-start;\n  margin: 2rem 0;\n  overflow-x: scroll;\n"]))),G=function(e){var t=e.state,n=e.setState;return Object(z.jsx)(D,{as:"ul",row:"3",column:"2/3",children:t.entities.map((function(e){var t=e.Id,r=e.Title,a=e.Images;return Object(z.jsx)(V,{id:t,title:r,images:a,setState:n},t)}))})},J=n(32),W=n.n(J),q=function(e){var t=e.state;return""!==t.contentUrl||t.errors.mediaList?t.errors.mediaList||void 0===t.contentUrl?Object(z.jsx)(N,{row:"2/3",column:"2/3",children:Object(z.jsx)(A,{children:"Video is currently unavailable. Pleas try again later."})}):Object(z.jsx)(N,{row:"2/3",column:"2/3",children:Object(z.jsx)(W.a,{url:t.contentUrl,playing:!0,controls:!0,muted:!0})}):Object(z.jsx)(N,{row:"2/3",column:"2/3",children:"Chose video from list below"})},H=n(33),K=n.n(H),Q=function(e){var t=e.loading,n=e.children,r=e.onClick,a=e.isLarge,i=void 0!==a&&a;return Object(z.jsx)("button",{type:"submit",className:K()("button is-primary",{"is-loading":t,"is-large":i}),onClick:r&&r,children:n})},X=Object(S.b)(N)(u||(u=Object(w.a)(["\n  flex-direction: column;\n"]))),Y=function(e){var t=e.setState;return Object(z.jsxs)(X,{row:"1",column:"1/2",children:[Object(z.jsx)(Q,{onClick:function(){return t({type:"signOut"})},children:"Sign Out"}),Object(z.jsx)("span",{children:sessionStorage.getItem("user")})]})},Z=S.b.div(b||(b=Object(w.a)(["\n  width: 100%;\n  height: 20px;\n  // background: silver;\n  text-align: center;\n  background-image: linear-gradient(\n    45deg,\n    hsl(171, 100%, 41%) 25%,\n    #f0f5f5 25%,\n    #f0f5f5 50%,\n    hsl(171, 100%, 41%) 50%,\n    hsl(171, 100%, 41%) 75%,\n    #f0f5f5 75%,\n    #f0f5f5 100%\n  );\n  background-size: 56.57px 56.57px;\n  animation: progress-bar-stripes 2s linear infinite;\n\n  @keyframes progress-bar-stripes {\n    from {\n      background-position: 56.57px 0;\n    }\n    to {\n      background-position: 0 0;\n    }\n  }\n"]))),$=S.b.div(j||(j=Object(w.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n"]))),_=function(e){var t=e.loading,n=e.children;return t?Object(z.jsx)($,{children:Object(z.jsx)(Z,{})}):Object(z.jsx)(z.Fragment,{children:n})},ee=n(34),te=n.n(ee),ne=Object(S.b)(N)(g||(g=Object(w.a)(["\n  flex-direction: column;\n"]))),re=function(e){var t=e.state,n=e.setState,r=e.getMediaList;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(N,{row:"1/2",column:"2/3",children:Object(z.jsx)(A,{color:"is-primary",children:"Change value on the slider and click search to fetch new media list."})}),Object(z.jsxs)(ne,{as:"form",row:"1",column:"3/4",onSubmit:function(e){e.preventDefault(),r(t.listId),n({type:"getMedia"})},children:[Object(z.jsx)(Q,{children:"Search"}),Object(z.jsx)("input",{id:"sliderWithValue",className:"slider has-output mr-4",step:"1",min:"2",max:"6",value:t.listId,onChange:function(e){te.a.attach(),n({type:"changeListId",payload:e.target.value})},type:"range"}),Object(z.jsx)("output",{htmlFor:"sliderWithValue",children:t.listId})]})]})},ae=function(e){var t=e.setState,n=e.state,r=function(e){t({type:"loading"});var n=sessionStorage.getItem("token");Object(M.a)(U.a.mark((function r(){var a;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,T.post("/Media/GetMediaList",{MediaListId:Number(e),IncludeCategories:!1,IncludeImages:!0,IncludeMedia:!1,PageNumber:1,PageSize:15},{headers:{Authorization:"Bearer ".concat(n)}});case 3:a=r.sent,t({type:"getMediaList",payload:a.data}),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(0),401===r.t0.response.status&&t({type:"signOut"}),t({type:"error",payload:"mediaList"}),window.scrollTo({top:0,behavior:"smooth"});case 12:case"end":return r.stop()}}),r,null,[[0,7]])})))()};return Object(p.useEffect)((function(){r(n.listId)}),[]),Object(z.jsx)(_,{loading:n.loading,children:Object(z.jsxs)(F,{children:[Object(z.jsx)(re,{state:n,setState:t,getMediaList:r}),Object(z.jsx)(Y,{setState:t}),n.errors.mediaList?Object(z.jsx)(N,{row:"3/4",column:"2/3",children:Object(z.jsx)(A,{children:"Media list is unavailable."})}):Object(z.jsx)(G,{state:n,setState:t}),n.errors.player?Object(z.jsx)(N,{row:"2/3",column:"2/3",children:Object(z.jsx)(A,{children:"Player is unavailable."})}):Object(z.jsx)(q,{state:n})]})})},ie=function(e){var t=e.setState,n=e.state;return Object(z.jsx)($,{children:Object(z.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t({type:"loading"}),Object(M.a)(U.a.mark((function e(){var n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.post("/Authorization/SignIn",{});case 3:n=e.sent,r=n.data,t({type:"signIn",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"error",payload:"signIn"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}(e)},children:Object(z.jsx)(Q,{loading:n.loading,isLarge:!0,children:"Sign In"})})})},se=function(){var e=Object(p.useReducer)(I,v),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(p.useEffect)((function(){sessionStorage.getItem("token")?r({type:"signIn"}):r({type:"signOut"})}),[]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(k,{}),n.errors.signIn&&Object(z.jsx)(A,{children:"Something went wrong. Please sign in again or try later."}),n.isUserSignedIn?Object(z.jsx)(ae,{setState:r,state:n}):Object(z.jsx)(ie,{setState:r,state:n})]})};n(82),n(83);m.a.render(Object(z.jsx)(h.a.StrictMode,{children:Object(z.jsx)(se,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.7a0c732a.chunk.js.map